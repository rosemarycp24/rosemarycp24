#!/usr/bin/env python

import yaml
import os

# Define the path to the YAML file on the remote server
remote_yaml_file = '/home/chowarro-adm/release.yaml'

# Define the output directory
output_dir = '/home/chowarro-adm/parse_yaml'
os.makedirs(output_dir, exist_ok=True)

# Read and parse the YAML file
with open(remote_yaml_file, 'r') as stream:
    yaml_data = yaml.safe_load(stream)

# Iterate through YAML sections and write them to separate output files
for section, data in yaml_data.items():
    output_filename = os.path.join(output_dir, "{}.txt".format(section))
    
    if isinstance(data, list):
        with open(output_filename, 'w') as output_file:
            for item in data:
                output_file.write("%s\n" % item)
    elif data is None:
        # Create a zero-byte file for sections with no data
        open(output_filename, 'w').close()

print("Output files have been created with the requested data or as zero-byte files.")
